{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nagarro\\\\Internship\\\\self\\\\InternshipUI\\\\src\\\\Login.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport UsersSelect from \"./UsersSelect\";\nimport { setUserSession } from \"./Utils/Common\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const mailField = useFormInput(\"\");\n  const passwordField = useFormInput(\"\");\n  const [error, setError] = useState(null);\n  const LOGIN_PATH = \"http://localhost:8081/api/auth/login\";\n\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    var request = new XMLHttpRequest();\n    request.open(\"POST\", LOGIN_PATH);\n    request.setRequestHeader(\"Content-Type\", \"application/json\");\n    var userMail = mailField.value;\n\n    try {\n      request.send(JSON.stringify({\n        mail: userMail,\n        password: passwordField.value\n      }));\n\n      request.onreadystatechange = function () {\n        if (request.readyState === XMLHttpRequest.DONE) {\n          if (request.status === 200) {\n            var token = JSON.parse(request.response, function (key, value) {\n              if (key === \"token\") {\n                let tokenValue = JSON.stringify(value);\n\n                if (tokenValue.length !== 0) {\n                  console.log(tokenValue);\n\n                  /*#__PURE__*/\n                  _jsxDEV(UsersSelect, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 31,\n                    columnNumber: 19\n                  }, this); // setUserSession(tokenValue, userMail);\n                  //      UsersSelect obj;\n\n                }\n              }\n            });\n            console.log(token);\n            setLoading(false);\n          } else {\n            setError(\"invalid credentials\");\n          }\n        }\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Login\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Mail\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ...mailField,\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      children: [\"Password\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        ...passwordField,\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"small\", {\n        style: {\n          color: \"red\"\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"button\",\n      value: loading ? \"Loading...\" : \"Login\",\n      onClick: handleLogin,\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"uAui5Fm6X9qUCcmlScj9H96EU6A=\", false, function () {\n  return [useFormInput, useFormInput];\n});\n\n_c = Login;\n\nconst useFormInput = initialValue => {\n  _s2();\n\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\n_s2(useFormInput, \"L08zUdRTae9t+nWvf9xbU6NcRrM=\");\n\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/Nagarro/Internship/self/InternshipUI/src/Login.js"],"names":["React","useState","UsersSelect","setUserSession","Login","props","loading","setLoading","mailField","useFormInput","passwordField","error","setError","LOGIN_PATH","handleLogin","request","XMLHttpRequest","open","setRequestHeader","userMail","value","send","JSON","stringify","mail","password","onreadystatechange","readyState","DONE","status","token","parse","response","key","tokenValue","length","console","log","marginTop","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport UsersSelect from \"./UsersSelect\";\r\nimport { setUserSession } from \"./Utils/Common\";\r\n\r\nfunction Login(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const mailField = useFormInput(\"\");\r\n  const passwordField = useFormInput(\"\");\r\n  const [error, setError] = useState(null);\r\n  const LOGIN_PATH = \"http://localhost:8081/api/auth/login\";\r\n\r\n  const handleLogin = () => {\r\n    setError(null);\r\n    setLoading(true);\r\n    var request = new XMLHttpRequest();\r\n    request.open(\"POST\", LOGIN_PATH);\r\n    request.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    var userMail = mailField.value;\r\n    try {\r\n      request.send(\r\n        JSON.stringify({ mail: userMail, password: passwordField.value })\r\n      );\r\n      request.onreadystatechange = function () {\r\n        if (request.readyState === XMLHttpRequest.DONE) {\r\n          if (request.status === 200) {\r\n            var token = JSON.parse(request.response, function (key, value) {\r\n              if (key === \"token\") {\r\n                let tokenValue = JSON.stringify(value);\r\n                if (tokenValue.length !== 0) {\r\n                  console.log(tokenValue);\r\n                  <UsersSelect/>\r\n                 // setUserSession(tokenValue, userMail);\r\n           //      UsersSelect obj;\r\n               \r\n                }\r\n              }\r\n            });\r\n            console.log(token);\r\n            setLoading(false);\r\n          } else {\r\n            setError(\"invalid credentials\");\r\n          }\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      Login\r\n      <br />\r\n      <br />\r\n      <div>\r\n        Mail\r\n        <br />\r\n        <input type=\"text\" {...mailField} autoComplete=\"new-password\" />\r\n      </div>\r\n      <div style={{ marginTop: 10 }}>\r\n        Password\r\n        <br />\r\n        <input type=\"password\" {...passwordField} autoComplete=\"new-password\" />\r\n      </div>\r\n      {error && (\r\n        <>\r\n          <small style={{ color: \"red\" }}>{error}</small>\r\n          <br />\r\n        </>\r\n      )}\r\n      <br />\r\n      <input\r\n        type=\"button\"\r\n        value={loading ? \"Loading...\" : \"Login\"}\r\n        onClick={handleLogin}\r\n        disabled={loading}\r\n      />\r\n      <br />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useFormInput = (initialValue) => {\r\n  const [value, setValue] = useState(initialValue);\r\n\r\n  const handleChange = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n  return {\r\n    value,\r\n    onChange: handleChange,\r\n  };\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}